<!doctype html><html lang=en><head><title>AWS Account Hardening ::
Sysarmy — El blog de quienes dan soporte</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Un artículo original de sercasti
Tabla de contenidos Configuración inicial para reforzar la seguridad de tu cuenta Medidas adicionales que serán útiles Qué hacer si tu cuenta ha sido comprometida Periódicamente Configuración inicial para reforzar la seguridad de tu cuenta: Habilita la autenticación multifactor (MFA) en el usuario root y en cualquier usuario de IAM con acceso a la consola. Habilitar MFA puede ayudar a asegurar las cuentas y evitar que usuarios no autorizados inicien sesión en las cuentas sin un token de seguridad.
"><meta name=keywords content="aws,seguridad,tips,piques,consejos"><meta name=robots content="noodp"><link rel=canonical href=https://sysarmy.com/blog/posts/aws-account-hardening/><link rel=stylesheet href=https://sysarmy.com/blog/assets/style.css><link rel=stylesheet href=https://sysarmy.com/blog/style.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=https://sysarmy.com/blog/img/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=https://sysarmy.com/blog/img/favicon.png><link href=https://sysarmy.com/blog/assets/fonts/Inter-Italic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://sysarmy.com/blog/assets/fonts/Inter-Regular.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://sysarmy.com/blog/assets/fonts/Inter-Medium.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://sysarmy.com/blog/assets/fonts/Inter-MediumItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://sysarmy.com/blog/assets/fonts/Inter-Bold.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://sysarmy.com/blog/assets/fonts/Inter-BoldItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><meta name=twitter:card content="summary"><meta name=twitter:title content="AWS Account Hardening"><meta name=twitter:description content="Unos cuantos consejos para reforzar la seguridad de tus cuentas en AWS."><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-MW9RRK2")</script><script>function loadScript(e){var n=document.getElementsByTagName("head")[0],t=document.createElement("script");t.type="text/javascript",t.src="https://tracker.metricool.com/resources/be.js",t.onreadystatechange=e,t.onload=e,n.appendChild(t)}loadScript(function(){beTracker.t({hash:"b5c0b4816e829c93645aa7ad738aa3c0"})})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-K4QJX7Y34Y"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-K4QJX7Y34Y")</script></head><body class=dark-theme><div class=container><header class=header><span class=header__inner><a href=/blog class=logo style=text-decoration:none><span class=logo__mark><svg class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg>
</span><span class=logo__text>sysarmy:~ blog$</span>
<span class=logo__cursor></span>
</a><span class=header__right><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=https://tienda.sysarmy.com/>Tienda</a></li><li><a href=https://www.youtube.com/channel/UCPE3EUzO58EBHzrJp2Fv7_A>Youtube</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=https://tienda.sysarmy.com/>Tienda</a></li><li><a href=https://www.youtube.com/channel/UCPE3EUzO58EBHzrJp2Fv7_A>Youtube</a></li></ul></nav><span class=menu-trigger><svg viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
</span><span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><div class=post><h1 class=post-title>AWS Account Hardening</h1><div class=post-meta><span class=post-date>June 21, 2021
</span><span class=post-read-time>— 7 minutos de lectura aprox.</span></div><span class=post-tags><a href=https://sysarmy.com/blog/tags/aws/>#aws</a>&nbsp;
<a href=https://sysarmy.com/blog/tags/seguridad/>#seguridad</a>&nbsp;
<a href=https://sysarmy.com/blog/tags/tips/>#tips</a>&nbsp;
<a href=https://sysarmy.com/blog/tags/piques/>#piques</a>&nbsp;
<a href=https://sysarmy.com/blog/tags/consejos/>#consejos</a>&nbsp;</span><figure class=post-cover><img src=https://sysarmy.com/blog/assets/aws-account-hardening.png alt="AWS Account Hardening"></figure><div class=post-content><base href=https://sysarmy.com/blog/><p>Un <a href=https://github.com/sercasti/aws-hardening>artículo original</a> de <a href=https://github.com/sercasti/>sercasti</a></p><h2 id=tabla-de-contenidos>Tabla de contenidos</h2><ol><li><a href=/blog/posts/aws-account-hardening/#inicial>Configuración inicial para reforzar la seguridad de tu cuenta</a></li><li><a href=/blog/posts/aws-account-hardening/#adicional>Medidas adicionales que serán útiles</a></li><li><a href=/blog/posts/aws-account-hardening/#comprometido>Qué hacer si tu cuenta ha sido comprometida</a></li><li><a href=/blog/posts/aws-account-hardening/#periodicamente>Periódicamente</a></li></ol><h2 id=inicial>Configuración inicial para reforzar la seguridad de tu cuenta:</h2><ul><li><p><a href=https://docs.aws.amazon.com/IAM/latest/UserGuide/id_root-user.html#id_root-user_manage_mfa>Habilita la autenticación multifactor (MFA) en el usuario root</a> y en <a href=https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_mfa.html>cualquier usuario de IAM</a> con acceso a la consola. Habilitar MFA puede ayudar a asegurar las cuentas y evitar que usuarios no autorizados inicien sesión en las cuentas sin un token de seguridad.</p></li><li><p><a href=https://docs.aws.amazon.com/IAM/latest/UserGuide/best-practices.html#lock-away-credentials>Elimina todas las llaves programáticas(keys) de IAM de la cuenta root,</a> no deberías usarlas en absoluto. Si de alguna manera esas llaves de acceso se filtran, se tiene acceso sin restricciones para hacer cualquier cosa.</p></li><li><p><a href=https://docs.aws.amazon.com/awscloudtrail/latest/userguide/cloudtrail-create-and-update-a-trail.html>Habilitar los servicios de registro de AWS CloudTrail</a> - Crear un nuevo rastro [NT: Trail], sólo para las escrituras, y habilita la vista [NT: insight] del rastro. Esto generará 50 centavos de dólar de cargo mensual, aunque ayudará a detectar y prevenir incidentes de seguridad.</p><p><img src=assets/aws-account-hardening-cloudtrail.png alt></p></li><li><p><a href=https://docs.aws.amazon.com/awsaccountbilling/latest/aboutv2/getting-started-ad.html#create-ad-alerts>Activa la detección de anomalías de costos de AWS</a>, es gratis:</p><p><img src=assets/aws-account-hardening-costAnomaly.png alt></p></li><li><p>No compartas las credenciales IAM entre varias personas, <a href=https://docs.aws.amazon.com/IAM/latest/UserGuide/best-practices.html#create-iam-users>crea usuarios IAM individuales</a> para cada persona de tu equipo (es gratis).</p></li><li><p>Utiliza el &ldquo;Principio del mínimo privilegio&rdquo; para tus roles IAM, <a href=https://docs.aws.amazon.com/IAM/latest/UserGuide/best-practices.html#grant-least-privilege>concede el mínimo privilegio a cada usuario/rol</a></p></li><li><p>Configura una <a href=https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_passwords_account-policy.html>política de contraseñas</a> para los usuarios de IAM.</p></li><li><p>Establece <a href=https://console.aws.amazon.com/billing/home?#/account>contactos alternativos</a> en las preferencias de tu cuenta.</p></li><li><p><a href=https://docs.aws.amazon.com/IAM/latest/UserGuide/best-practices.html>Información adicional</a></p></li></ul><hr><h2 id=adicional>Medidas adicionales que serán útiles</h2><ul><li><p>Crear una <a href=https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/monitor_estimated_charges_with_cloudwatch.html>alarma de facturación de CloudWatch</a> para evitar fugas.</p></li><li><p>Habilitar <a href=https://aws.amazon.com/guardduty/>GuardDuty</a>, no sólo ayudará en la parte reactiva de las incidencias, sino que también las prevendrá. GuardDuty te alertará cuando haya configuraciones inseguras, superficies de ataque o vulnerabilidades conocidas en tus recursos o instancias de AWS. Este servicio tiene una prueba gratuita de 30 días que puede utilizar para validar sus cuentas.</p></li><li><p>Agrupar las cargas de trabajo en función del propósito empresarial y la propiedad [NT: ownership] utilizando <a href=https://docs.aws.amazon.com/whitepapers/latest/organizing-your-aws-environment/benefits-of-using-multiple-aws-accounts.html>diferentes cuentas de AWS</a> (son gratuitas). Al separar cargas de trabajo[alcance de permisos?] en diferentes cuentas reduces el radio de explosión, fuerzas el aislamiento lógico de recursos, evitas dependencias y conflictos, restringes el acceso a datos sensibles y limitas el alcance del impacto. Piensa en ello como una agrupación lógica, lo que mejor se adapte a tu escenario, por ejemplo, por entorno (dev, prod, test), o por aplicación.
Esto también ayudará con las cuotas de servicio y la gestión de costos.</p><p>Puedes configurar una organización de AWS (es gratis) para centralizar la facturación en una sola cuenta pagadora, y crear SCP (políticas de control seguras) para restringir cosas que sabes con certeza que nunca deben ocurrir en ninguna de esas cuentas, por ejemplo, regiones que nunca deben usarse, o tipos de instancia que nunca deben ejecutarse.</p><p><img src=assets/aws-account-hardening-createOrg.png alt>
<img src=assets/aws-account-hardening-scpscreated.png%22 alt></p><p>No olvides <a href=https://aws.amazon.com/blogs/security/how-to-use-service-control-policies-to-set-permission-guardrails-across-accounts-in-your-aws-organization/>aplicar la política</a> a la cuenta después de crearla.</p><p>Encontrarás algunos ejemplos de SCP en la carpeta /scps del <a href=https://github.com/sercasti/aws-hardening>repositorio del autor orignal de este artículo en inglés</a>, y puedes encontrar más en <a href=https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_scps_examples.html>la Gúia para Organizaciones</a> de la documentacíon de AWS.</p></li></ul><hr><h2 id=comprometido>Qué hacer si tu cuenta ha sido comprometida</h2><ul><li><p>Paso 1: Inicia sesión <a href=https://docs.aws.amazon.com/IAM/latest/UserGuide/id_root-user.html>como el usuario raíz de la cuenta de AWS</a> (no su usuario de IAM). <a href=https://aws.amazon.com/premiumsupport/knowledge-center/delete-access-key/>Elimina la clave de acceso de AWS expuesta</a> y elimina cualquier clave de acceso programática de la cuenta raíz que se haya podido crear durante la infracción.</p></li><li><p>Paso 2: Dentro de IAM en tu consola, encontrarás un elemento de menú llamado <a href=https://aws.amazon.com/premiumsupport/knowledge-center/delete-access-key/>Informe de credenciales</a>, descarga el informe de credenciales y utilízalo para rotar y eliminar todas las claves de acceso de la cuenta raíz y de AWS Identity and Access Management (IAM). Para asegurar tu cuenta, elimina todos los usuarios, roles y políticas de IAM no autorizados y revoca todas las credenciales temporales, elimina todos los usuarios de IAM potencialmente no autorizados y, a continuación, <a href=https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_passwords_admin-change-user.html>cambia la contraseña</a> de todos los demás usuarios de IAM.</p></li><li><p>Paso 3: Comprueba que la información de tu cuenta y los contactos alternativos son correctos en las preferencias de la <a href=https://console.aws.amazon.com/billing/home?#/account>cuenta</a>.</p></li><li><p>Paso 4: Comprueba tu registro de CloudTrail para ver si hay actividad no autorizada, como la creación de usuarios de IAM no autorizados, políticas, roles o credenciales de seguridad temporales.
Utiliza las capacidades de búsqueda para rastrear lo que se hizo con las credenciales comprometidas y revierte cada acción una a la vez.
Si estas credenciales se utilizaron para crear nuevos usuarios o credenciales, será necesario repetir ese análisis para cada uno, para deshacer todo lo que se ha hecho durante el incidente.
Incluso si no has creado ningún rastro para tu cuenta, el &ldquo;Historial de eventos&rdquo; te muestra los últimos 90 días de eventos de gestión (y esos no se pueden borrar).
Intenta rastrear el inicio del incidente, encuentra la primera llamada a la API de operaciones &ldquo;ConsoleLogin&rdquo; no reconocidas, o nombres de eventos &ldquo;CreateAccount&rdquo;, o cualquier tipo de actividad que sea sospechosa, prueba diferentes filtros (Nombre del evento, clave de acceso de AWS, tipo de recurso, nombre de usuario) para encontrar dónde empezó todo, y luego rastrea desde ahí, para seguir cualquier ramificación del incidente.
Fíjate en que las entradas de Cloudtrail incluyen la dirección IP y el agente de usuario [NT: User Agent], lo que puede ayudar a la hora de intentar relacionar diferentes llamadas a la API.</p></li><li><p>Paso 5: Revisa tu cuenta de AWS en busca de cualquier uso no autorizado de AWS, como instancias EC2 no autorizadas, funciones Lambda u ofertas de EC2 Spot.
Para comprobar el uso, inicia sesión en tu consola de administración de AWS y revisa cada página de servicio.
Elimina cualquier recurso de tu cuenta que no hayas creado, como las instancias y <a href=https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/terminating-instances.html>AMI de Amazon Elastic Compute Cloud (Amazon EC2)</a>, los volúmenes de Amazon Elastic Block Store <a href=https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-deleting-volume.html>(Amazon EBS)</a>, las <a href=https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-deleting-snapshot.html>instantáneas</a>, los usuarios de <a href=https://docs.aws.amazon.com/IAM/latest/UserGuide/id_users_manage.html#id_users_deleting>IAM</a>.</p></li><li><p>Paso 6: Comprueba todos los buckets públicos en busca de credenciales filtradas o bibliotecas obsoletas que puedan estar exponiendo variables de entorno.</p></li><li><p>Paso 7: Comprueba todos los repositorios de código para asegurarte de que las credenciales de IAM no han sido enviadas a los atacantes. [FIXME: intrusores? jerga]</p></li><li><p>Paso 8: Responde a las notificaciones que recibas de AWS Support a través del <a href=https://console.aws.amazon.com/support/>Centro de AWS Support</a>.
Si no puedes iniciar sesión, utiliza el <a href=https://pages.awscloud.com/contact-us-account-support.html>formulario de contacto</a>.
Si tienes alguna pregunta o duda, crea un nuevo caso [FIXME: caso?] de AWS Support en el <a href=https://console.aws.amazon.com/support/>Centro de AWS Support</a>.</p></li><li><p>Paso 9: Revisa tu <a href=https://docs.aws.amazon.com/awsaccountbilling/latest/aboutv2/invoice.html>factura</a>. Tu factura puede ayudarle a identificar los recursos que no has creado.</p></li><li><p>Paso 10: Utiliza el <a href=https://docs.aws.amazon.com/IAM/latest/UserGuide/what-is-access-analyzer.html>analizador de acceso de IAM</a> para comprobar si existen recursos restantes creados por el atacante que podrían ser utilizados como puertas traseras.
Este es un <a href=https://console.aws.amazon.com/access-analyzer/>servicio gratuito</a>, detectará cualquier recurso compartido fuera de la cuenta.</p></li><li><p>Paso 11: Revisa las recomendaciones del principio de este documento, para reforzar la seguridad de tu cuenta.</p></li></ul><p>Información adicional:
<a href=https://aws.amazon.com/es/premiumsupport/knowledge-center/potential-account-compromise/>https://aws.amazon.com/es/premiumsupport/knowledge-center/potential-account-compromise/</a></p><hr><h2 id=periodicamente>Periódicamente</h2><ul><li><p>Revisa <a href=https://aws.amazon.com/premiumsupport/technology/trusted-advisor/>Trusted advisor</a>, es un servicio gratuito que cubrirá algunos puntos de datos en tus cuentas y levantará banderas rojas sobre problemas de seguridad.</p></li><li><p>Recuerda desactivar las credenciales de AWS de las personas que van a dejar la empresa, antes de que lo hagan.</p></li><li><p>Utiliza <a href=https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use_switch-role-ec2.html>roles</a> para las aplicaciones que se ejecutan en instancias de Amazon EC2, en lugar de claves de acceso.</p></li><li><p><a href=https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html#Using_RotateAccessKey>Rota las credenciales</a> regularmente.</p></li><li><p>Elimina las <a href=https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_finding-unused.html>credenciales innecesarias</a>.</p></li></ul><p>Estas recomendaciones se derivan de la primera fase del modelo de madurez de la seguridad de AWS, ya que se trata de beneficios rápidos para comenzar con seguridad tu viaje en la nube. Si quieres profundizar en este modelo, no dudes en visitar <a href=https://maturitymodel.security.aws.dev/>AWS Security Maturity Model</a>.</p><p>Si quieres ir a por todas, y ejecutar una herramienta para evaluar tu seguridad en AWS, prueba <a href=https://github.com/toniblyx/prowler>Prowler</a>.
Prowler es una herramienta de seguridad para realizar evaluaciones de las mejores prácticas de seguridad de AWS, auditorías, respuesta a incidentes, monitorización continua, endurecimiento y preparación forense.</p><h3 id=algunas-capturas-de-prowler>Algunas capturas de Prowler:</h3><p><img src=assets/aws-account-hardening-prowler-1.png alt>
<img src=assets/aws-account-hardening-prowler-2.png alt>
<img src=assets/aws-account-hardening-prowler-3.png alt></p><p>Colaboraron en este artículo: sercasti, jedux, mabeett.</p><div class=ve-desktop><ins class=dcmads style=display:inline-block;width:728px;height:90px data-dcm-placement=N410401.3634809SYSARMY.COMBLOG/B10464038.251052924 data-dcm-rendering-mode=iframe data-dcm-https-only data-dcm-resettable-device-id data-dcm-app-id><script src=https://www.googletagservices.com/dcm/dcmads.js></script></ins></div><div class=ve-mobile><ins class=dcmads style=display:inline-block;width:320px;height:50px data-dcm-placement=N410401.3634809SYSARMY.COMBLOG/B10464038.250920272 data-dcm-rendering-mode=iframe data-dcm-https-only data-dcm-resettable-device-id data-dcm-app-id><script src=https://www.googletagservices.com/dcm/dcmads.js></script></ins></div><script>if(window.innerWidth<960)for(var divsToHide=document.getElementsByClassName("ve-desktop"),i=0;i<divsToHide.length;i++)divsToHide[i].style.visibility="hidden",divsToHide[i].style.display="none";else for(divsToHide=document.getElementsByClassName("ve-mobile"),i=0;i<divsToHide.length;i++)divsToHide[i].style.visibility="hidden",divsToHide[i].style.display="none"</script></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Leer otros posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=https://sysarmy.com/blog/posts/apt-undo/><span class=button__icon>←</span>
<span class=button__text>apt-undo, reinstalar paquetes removidos por error</span>
</a></span><span class="button next"><a href=https://sysarmy.com/blog/posts/tips-de-trabajo-remoto/><span class=button__text>Tips De Trabajo Remoto</span>
<span class=button__icon>→</span></a></span></div></div></div></div><footer class=footer><div class=footer__inner><a href=/blog class=logo style=text-decoration:none><span class=logo__mark><svg class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg>
</span><span class=logo__text>sysarmy:~ blog$</span>
<span class=logo__cursor></span></a><div class=copyright><span>© 2025 Powered by
<a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span>
<span>Theme created by
<a href=https://twitter.com/panr target=_blank rel=noopener>panr</a></span></div></div></footer><script src=https://sysarmy.com/blog/assets/main.js></script><script src=https://sysarmy.com/blog/assets/prism.js></script></div></body></html>
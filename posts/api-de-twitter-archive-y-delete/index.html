<!doctype html><html lang=en><head><title>Probando la API de Twitter: tweet archive y delete ::
Sysarmy — El blog de quienes dan soporte</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Hace mucho tiempo que no me ponía a hacer algo con la API de Twitter, y se que hubo muchos cambios en los últimos meses / años en cuanto a funcionalidades, permisos y limitaciones.
Para este caso en particular necesitaba hacer un cleanup masivo de algunas cuentas de Twitter con decenas de miles de tweets. He aquí algunas cuestiones interesantes, y lecciones aprendidas por pasos para principiantes.
"><meta name=keywords content="sysadmin,twitter,api,python"><meta name=robots content="noodp"><link rel=canonical href=https://sysarmy.com/blog/posts/api-de-twitter-archive-y-delete/><link rel=stylesheet href=https://sysarmy.com/blog/assets/style.css><link rel=stylesheet href=https://sysarmy.com/blog/style.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=https://sysarmy.com/blog/img/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=https://sysarmy.com/blog/img/favicon.png><link href=https://sysarmy.com/blog/assets/fonts/Inter-Italic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://sysarmy.com/blog/assets/fonts/Inter-Regular.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://sysarmy.com/blog/assets/fonts/Inter-Medium.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://sysarmy.com/blog/assets/fonts/Inter-MediumItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://sysarmy.com/blog/assets/fonts/Inter-Bold.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://sysarmy.com/blog/assets/fonts/Inter-BoldItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><meta name=twitter:card content="summary"><meta name=twitter:title content="Probando la API de Twitter: tweet archive y delete"><meta name=twitter:description content="Probando la API de Twitter: tweet archive y delete"><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-MW9RRK2")</script><script>function loadScript(e){var n=document.getElementsByTagName("head")[0],t=document.createElement("script");t.type="text/javascript",t.src="https://tracker.metricool.com/resources/be.js",t.onreadystatechange=e,t.onload=e,n.appendChild(t)}loadScript(function(){beTracker.t({hash:"b5c0b4816e829c93645aa7ad738aa3c0"})})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-K4QJX7Y34Y"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-K4QJX7Y34Y")</script></head><body class=dark-theme><div class=container><header class=header><span class=header__inner><a href=/blog class=logo style=text-decoration:none><span class=logo__mark><svg class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg>
</span><span class=logo__text>sysarmy:~ blog$</span>
<span class=logo__cursor></span>
</a><span class=header__right><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=https://tienda.sysarmy.com/>Tienda</a></li><li><a href=https://www.youtube.com/channel/UCPE3EUzO58EBHzrJp2Fv7_A>Youtube</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=https://tienda.sysarmy.com/>Tienda</a></li><li><a href=https://www.youtube.com/channel/UCPE3EUzO58EBHzrJp2Fv7_A>Youtube</a></li></ul></nav><span class=menu-trigger><svg viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
</span><span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><div class=post><h1 class=post-title>Probando la API de Twitter: tweet archive y delete</h1><div class=post-meta><span class=post-date>October 6, 2020
</span><span class=post-read-time>— 5 minutos de lectura aprox.</span></div><span class=post-tags><a href=https://sysarmy.com/blog/tags/sysadmin/>#sysadmin</a>&nbsp;
<a href=https://sysarmy.com/blog/tags/twitter/>#twitter</a>&nbsp;
<a href=https://sysarmy.com/blog/tags/api/>#api</a>&nbsp;
<a href=https://sysarmy.com/blog/tags/python/>#python</a>&nbsp;</span><figure class=post-cover><img src=https://sysarmy.com/blog/assets/1_Y5r4YuCqCLqIWlCy_ccPqQ.jpeg alt="Probando la API de Twitter: tweet archive y delete"></figure><div class=post-content><base href=https://sysarmy.com/blog/><p>Hace mucho tiempo que no me ponía a hacer algo con la API de Twitter, y se que hubo muchos cambios en los últimos meses / años en cuanto a funcionalidades, permisos y limitaciones.</p><p>Para este caso en particular necesitaba hacer un cleanup masivo de algunas cuentas de Twitter con decenas de miles de tweets. He aquí algunas cuestiones interesantes, y lecciones aprendidas por pasos para principiantes.</p><h1 id=paso-1-cuenta-dev-de-twitter-permisos-y-autenticación>Paso 1: Cuenta Dev de Twitter, permisos y autenticación</h1><p>Más allá de los pasos para crear la cuenta de Developer de Twitter (y todas las justificaciones necesarias), quiero recalcar un par de tips y problemas que tuve que les pueden llegar a pasar:</p><ol><li>Luego de enviar su request para una cuenta de developer les puede llegar a pasar, como a mí, que en unas pocas horas o días ya van a poder crear su app en el dashboard de Twitter.</li></ol><p><img src=assets/1_Y5r4YuCqCLqIWlCy_ccPqQ.jpeg alt>
<em>Vista principal del dashboard de Twitter Dev</em></p><p>Cuidado, esto es verídico, y por más que creé la app no me funcionaba por problemas de autenticación de tokens (por más que hagan todo bien). Recién un mes después de que me llegó este mail de confirmación pude hacer andar todo. <strong>Clave:</strong> asegurarse de tener la confirmación por mail de Twitter antes de probar porque <strong>no van a poder autenticar</strong>.</p><p><img src=assets/1_JytexSnThIcgvwjzSUWQ7w.jpeg alt></p><p><em>Ejemplo de mail de confirmación</em></p><ol start=2><li>Una vez creada la app, asegúrense de:</li></ol><ul><li>crear un dev environment, agregar la app, y agregar el dev environment a las funcionalidades de la app:
<img src=assets/1_YL4be7SqpYL7t_jXNOFmfA.jpeg alt></li><li>darle los permisos:
<img src=assets/1_7Oj-OPc4a3oCgISwi7WkSg.jpeg alt></li><li>generar y copiar los tokens:
<img src=assets/1_tL8LxVcFxsnjQ1JlPDlzrA.jpeg alt></li><li>suscribir su app a los Labs de Twitter.</li></ul><p>Yo porque soy medio bruto le doy todos los permisos a mi app (por las dudas) pero haciendo esto no tendrían que tener ningun problema. En caso de necesitar troubleshooting de autenticación para los tokens vayan a <a href=https://developer.twitter.com/en/docs/labs/tweets-and-users/quick-start/get-tweets>este link</a>.</p><h1 id=paso-2-script-para-borrar-todos-los-tuits-de-una-cuenta>Paso 2: Script para borrar TODOS los tuits de una cuenta</h1><p>Lamentablemente no hay forma fácil de borrar masivamente tus tuits, y de las herramientas que hay online, una o dos son confiables, pero tenés que pagar. Lo intenté! Pero oh!, el pago es con tarjeta de crédito a través de PayPal, que está bloqueado en el país.</p><p>Lo que hice con este script está basado 90% <a href=https://github.com/ngeor/delete-old-tweets>en este código</a> en Python que encontré en GitHub. Está muy bueno y anda perfecto, gran aporte.</p><p><em>Requerimientos: Python, librería <a href=https://www.tweepy.org/>Tweepy</a> 3.7.0</em></p><ol><li>La autenticación se hace en las primeras líneas sólo con sus Tokens. Es lo único que se usa y no hace falta agregar nada más.</li></ol><p><img src=assets/1_yT_gKrhbYt-E35XmKMrUvA.png alt></p><ol start=2><li><p>Lo único que tienen que hacer es cambiar el max_id con el ID de el tuit que quieren poner como límite y lo que hace el script es borrar todos los tuits empezando por el más viejo. Fácil y simple.</p></li><li><p>Está limitado a 200 API calls por una cuestión obvia. Borra bastante rápido, a un ritmo de medio segundo por tweet, y no te jode con ninguna limitación o threshold de la cuenta de dev.
Ahora&mldr; si están buscando borrar tweets de hasta hace un año, no van a tener problemas. El inconveniente es que cuando hacen el get de los tweets, la API te va a limitar el get tweets hasta un año, siempre. Lamentablemente esta es una limitación a la que no le pudimos encontrar la vuelta.</p></li></ol><h1 id=paso-3-tweet-archive-y-lista-de-ids-de-tweets>Paso 3: Tweet Archive y lista de IDs de Tweets</h1><p>La API nos puede limitar, pero una de las cosas que podemos hacer es — desde los settings de la cuenta — bajar un archive completo de toda tu data de Twitter. Esto te baja absolutamente todo: fotos, actividad, etc. Depende de actividad de la cuenta puede pesar hasta mas de 2 GB:</p><p><img src=assets/1_yzuRuTcX9xhXoQH4rcExtw.png alt></p><ol><li>Una vez bajado el archivo, ir a la carpeta data y editar el archivo tweet.js (va a ser el más pesado de todos). Es un json que se ve así:</li></ol><p><img src=assets/1_Nqkw_1O5MH2rAa1y_rPp-g.png alt></p><p>Va a tener posiblemente miles de lineas y no está ordenado cronológicamente (no pregunten por qué).</p><ol start=2><li>Ahora lo que tenemos que hacer es traernos los IDs de los tweets. Si tienen alguna herramienta para parsear json, bárbaro. Sino lo que pueden hacer es una búsqueda con regex usando notepad++ del campo “id_str”. Este <a href=https://www.launch2success.com/guide/advanced-find-and-replace-in-notepad/>cheatsheet</a> está bastante simplificado para lo que necesitamos. Una búsqueda así sirve ( <strong>¡cuidado!</strong> algunos IDs tienen 18 dígitos, y otros 19)</li></ol><p><img src=assets/1_F3ambA2C_g0A4b7gIjwYuw.png alt></p><p>Muchos IDs les van a aparecer duplicados, pero lo bueno es que los IDs sí están ordenados numéricamente: ID más bajo es el tweet más viejo y ID más alto es el tweet más nuevo. Removemos duplicados y ordenamos hasta tener una lista en un txt así:</p><p><img src=assets/1_-f816Y4PcizjYjPTeLD4xg.png alt></p><ol start=3><li>Una vez que tienen el txt listo: ponen el path en el código (línea 100) y va a buscar los IDs y los va a borrar. Si el ID es viejo de un tuit que ya borraron o no existe, lo omite.
En max_id hay que poner el límite del último tweet que quieren borrar.</li></ol><p><img src=assets/1_BBuNwURXWEhS-oSWkeu9gg.png alt></p><p>Y listo! Si alguien quiere mejorarlo, adelante :) <a href=assets/delete_tweets_from_text_file.py>Acá está el código listo para usar</a></p><p><em>Créditos a Pablo Pietro, <a href=https://twitter.com/jedux>Edu</a> y <a href=https://twitter.com/godlike64>Godlike</a> que me dieron una mano pensando e investigando</em></p><h4 id=autor>Autor</h4><p><a href=https://medium.com/@aragunde>Mariano Aragunde</a> Periodista, comunicador, IBMer, ultramaratonista, triatleta, músico, hincha de Racing, del Oeste (con eso creo que alcanza). Mis opiniones son personales</p><div class=ve-desktop><ins class=dcmads style=display:inline-block;width:728px;height:90px data-dcm-placement=N410401.3634809SYSARMY.COMBLOG/B10464038.251052924 data-dcm-rendering-mode=iframe data-dcm-https-only data-dcm-resettable-device-id data-dcm-app-id><script src=https://www.googletagservices.com/dcm/dcmads.js></script></ins></div><div class=ve-mobile><ins class=dcmads style=display:inline-block;width:320px;height:50px data-dcm-placement=N410401.3634809SYSARMY.COMBLOG/B10464038.250920272 data-dcm-rendering-mode=iframe data-dcm-https-only data-dcm-resettable-device-id data-dcm-app-id><script src=https://www.googletagservices.com/dcm/dcmads.js></script></ins></div><script>if(window.innerWidth<960)for(var divsToHide=document.getElementsByClassName("ve-desktop"),i=0;i<divsToHide.length;i++)divsToHide[i].style.visibility="hidden",divsToHide[i].style.display="none";else for(divsToHide=document.getElementsByClassName("ve-mobile"),i=0;i<divsToHide.length;i++)divsToHide[i].style.visibility="hidden",divsToHide[i].style.display="none"</script></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Leer otros posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=https://sysarmy.com/blog/posts/servicios-de-aws/><span class=button__icon>←</span>
<span class=button__text>Un repaso de los servicios de AWS</span>
</a></span><span class="button next"><a href=https://sysarmy.com/blog/posts/todavia-se-usan-servers-fisicos/><span class=button__text>¿Tu empresa todavía usa servidores físicos? ¿Por qué?</span>
<span class=button__icon>→</span></a></span></div></div></div></div><footer class=footer><div class=footer__inner><a href=/blog class=logo style=text-decoration:none><span class=logo__mark><svg class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg>
</span><span class=logo__text>sysarmy:~ blog$</span>
<span class=logo__cursor></span></a><div class=copyright><span>© 2025 Powered by
<a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span>
<span>Theme created by
<a href=https://twitter.com/panr target=_blank rel=noopener>panr</a></span></div></div></footer><script src=https://sysarmy.com/blog/assets/main.js></script><script src=https://sysarmy.com/blog/assets/prism.js></script></div></body></html>
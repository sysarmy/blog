<!doctype html><html lang=en><head><title>Entendiendo la fork() Bomb :(){ :|:& };: de bash ::
Sysarmy — El blog de quienes dan soporte</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Una fork bomb (bomba fork) es una forma de ataque del tipo denial-of-service (DoS) o denegación de servicio, utilizada contra sistemas basados en Unix. Como su nombre lo indica, utiliza la operación fork, donde un proceso crea una copia de sí mismo.
La conocida cadena :(){ :|:& };: no es nada más que una función de bash, la cual se ejecuta recursivamente. Comúnmente, es utilizada por sysadmins para testear limitaciones sobre usuarios en cuanto a cantidad de procesos que pueden ejecutar en un servidor.
En linux, dichos límites de procesos pueden ser configurados desde /etc/security/limits.conf o vía el módulo pam_limits de Linux-PAM desde /etc/security/limits.d y así poder evitar esta forma de ataque. Una vez activada la bomba de forma exitosa en el sistema, puede no ser posible retornar a un estado de operación normal sin tener que realizar un reboot forzado, ya que la única solución a una fork bomb es destruir todas las instancias de la misma.
"><meta name=keywords content="bash,forkbomb"><meta name=robots content="noodp"><link rel=canonical href=https://sysarmy.com/blog/posts/entendiendo-la-fork-bomb-de-bash/><link rel=stylesheet href=https://sysarmy.com/blog/assets/style.css><link rel=stylesheet href=https://sysarmy.com/blog/style.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=https://sysarmy.com/blog/img/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=https://sysarmy.com/blog/img/favicon.png><link href=https://sysarmy.com/blog/assets/fonts/Inter-Italic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://sysarmy.com/blog/assets/fonts/Inter-Regular.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://sysarmy.com/blog/assets/fonts/Inter-Medium.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://sysarmy.com/blog/assets/fonts/Inter-MediumItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://sysarmy.com/blog/assets/fonts/Inter-Bold.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://sysarmy.com/blog/assets/fonts/Inter-BoldItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><meta name=twitter:card content="summary"><meta name=twitter:title content="Entendiendo la fork() Bomb :(){ :|:& };: de bash"><meta name=twitter:description content="Entendiendo la fork() Bomb :(){ :|:& };: de bash"><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-MW9RRK2")</script><script>function loadScript(e){var n=document.getElementsByTagName("head")[0],t=document.createElement("script");t.type="text/javascript",t.src="https://tracker.metricool.com/resources/be.js",t.onreadystatechange=e,t.onload=e,n.appendChild(t)}loadScript(function(){beTracker.t({hash:"b5c0b4816e829c93645aa7ad738aa3c0"})})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-K4QJX7Y34Y"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-K4QJX7Y34Y")</script></head><body class=dark-theme><div class=container><header class=header><span class=header__inner><a href=/blog class=logo style=text-decoration:none><span class=logo__mark><svg class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg>
</span><span class=logo__text>sysarmy:~ blog$</span>
<span class=logo__cursor></span>
</a><span class=header__right><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=https://tienda.sysarmy.com/>Tienda</a></li><li><a href=https://www.youtube.com/channel/UCPE3EUzO58EBHzrJp2Fv7_A>Youtube</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=https://tienda.sysarmy.com/>Tienda</a></li><li><a href=https://www.youtube.com/channel/UCPE3EUzO58EBHzrJp2Fv7_A>Youtube</a></li></ul></nav><span class=menu-trigger><svg viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
</span><span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><div class=post><h1 class=post-title>Entendiendo la fork() Bomb :(){ :|:& };: de bash</h1><div class=post-meta><span class=post-date>April 5, 2021
</span><span class=post-read-time>— 3 minutos de lectura aprox.</span></div><span class=post-tags><a href=https://sysarmy.com/blog/tags/bash/>#bash</a>&nbsp;
<a href=https://sysarmy.com/blog/tags/forkbomb/>#forkbomb</a>&nbsp;</span><figure class=post-cover><img src=https://sysarmy.com/blog/assets/entendiendo-la-fork-bomb-de-bash.jpeg alt="Entendiendo la fork() Bomb :(){ :|:& };: de bash"></figure><div class=post-content><base href=https://sysarmy.com/blog/><p>Una fork bomb (bomba fork) es una forma de ataque del tipo <em>denial-of-service</em> (DoS) o <a href=https://es.wikipedia.org/wiki/Ataque_de_denegaci%C3%B3n_de_servicio>denegación de servicio</a>, utilizada contra sistemas basados en Unix. Como su nombre lo indica, utiliza la operación <strong><a href=https://en.wikipedia.org/wiki/Fork_%28system_call%29>fork</a></strong>, donde un proceso crea una copia de sí mismo.</p><p>La conocida cadena <code>:(){ :|:& };:</code> no es nada más que una función de bash, la cual se ejecuta recursivamente. Comúnmente, es utilizada por sysadmins para testear limitaciones sobre usuarios en cuanto a cantidad de procesos que pueden ejecutar en un servidor.</p><p>En linux, dichos límites de procesos pueden ser configurados desde <code>/etc/security/limits.conf</code> o vía el módulo pam_limits de <a href=https://wiki.archlinux.org/index.php/PAM_%28Espa%C3%B1ol%29>Linux-PAM</a> desde <code>/etc/security/limits.d</code> y así poder evitar esta forma de ataque. Una vez activada la bomba de forma exitosa en el sistema, puede no ser posible retornar a un estado de operación normal sin tener que realizar un reboot forzado, ya que la única solución a una fork bomb es destruir todas las instancias de la misma.</p><blockquote><p><strong>WARNING</strong>: Los siguientes ejemplos pueden crashear tu sistema.</p></blockquote><h2 id=analizando-el-código-de-la-fork-bomb--->Analizando el código de la fork() Bomb <code>:(){ :|:& };:</code></h2><p><code>:()</code> - Define una función con nombre <code>:</code>. Es una función que no acepta argumentos. La sintáxis de una función en Bash tiene la siguiente forma:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>foo<span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>    arg1<span style=color:#f92672>=</span>$1
</span></span><span style=display:flex><span>    arg2<span style=color:#f92672>=</span>$2
</span></span><span style=display:flex><span>    echo <span style=color:#e6db74>&#39;Bar...&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>#do_something on $arg argument</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>La <code>fork()</code> bomb se define de la siguiente manera:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span> :<span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>     :|:&amp;
</span></span><span style=display:flex><span> <span style=color:#f92672>}</span>;:
</span></span></code></pre></div><p><code>:|:</code> - La función se llama a sí misma (<a href=/blog/posts/entendiendo-la-fork-bomb-de-bash/>recursión</a>) y redirecciona el output o salida, utilizando el operador pipe <code>|</code>, a otra llamada de la de la misma funcion <code>:</code>. La magia está en que se llama dos veces a la función y así comienza el bombardeo al sistema.</p><p><code>&</code> - Pone el llamado de la función en background de manera que los procesos hijos (copias) no mueran y así se comen los recursos del sistema.</p><p><code>;</code> - Finalización de la definición de la función</p><p><code>:</code> - Llamado (call) de la función, AKA setteo de la bomba.</p><p>De manera un poco más legible, la función se puede definir de la siguiente manera:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>bomb<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    bomb | bomb &amp;
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>; bomb
</span></span></code></pre></div><p>Un sistema Unix correctamente configurado no debería caerse cuando se dispara una fork bomb.</p><h2 id=previniendo-una-fork-bomb-en-linux>Previniendo una fork bomb en Linux</h2><p>Una posible forma de prevenir el ataque es limitando el numero de procesos que pueden correr los usuarios. La información de la cantidad máxima actual se puede obtener ejecutando el siguiente comando:</p><pre tabindex=0><code>ulimit -u
</code></pre><p>Otra forma:</p><pre tabindex=0><code>ulimit -a
</code></pre><p><img src=assets/fork-bomb-ulimit-a.png alt="Ejecución comando ulimit -a"></p><p>El número 50922 indica que el usuario puede correr 50922 procesos. Para proteger el sistema de una fork bomb, es necesario disminuir dicho valor. Para limitar la sesión a, por ejemplo, 5000 procesos, se utiliza el siguiente comando:</p><pre tabindex=0><code>ulimit -S -u 5000
</code></pre><blockquote><p><strong>WARNING</strong>: No utilices valores de ulimit muy bajos! Esto puede ocasionar problemas a la hora de trabajar con el sistema.</p></blockquote><p>Ahora, al correr la fork bomb:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>:<span style=color:#f92672>(){</span> :|:&amp; <span style=color:#f92672>}</span>;:
</span></span></code></pre></div><p>Se obtendrá el siguiente output:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>bash: fork: Resource temporarily unavailable
</span></span><span style=display:flex><span>bash: fork: Resource temporarily unavailable
</span></span><span style=display:flex><span>bash: fork: Resource temporarily unavailable
</span></span><span style=display:flex><span>bash: fork: Resource temporarily unavailable
</span></span><span style=display:flex><span>bash: fork: Resource temporarily unavailable
</span></span><span style=display:flex><span>bash: fork: Resource temporarily unavailable
</span></span><span style=display:flex><span>bash: fork: Resource temporarily unavailable
</span></span></code></pre></div><p>De esta forma, estaríamos evitando este tipo de ataques. Se puede ver además, corriendo el comando pgrep, la cantidad límite (actual) the threads:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pgrep -wcu $USER
</span></span></code></pre></div><p>Salida de ejemplo:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#ae81ff>5002</span>
</span></span></code></pre></div><p>Ahora podes comprar <a href="https://tienda.sysarmy.com/productos/fork/?variant=107398458">la remera forkbomb en la tienda de sysarmy</a> o el <a href=https://tienda.sysarmy.com/productos/sysarmy-sticker-pack-0/>sticker pack con la forkbomb</a> y explicarle a todos que significa!</p><p>Artículo original en <a href=https://www.cyberciti.biz/faq/understanding-bash-fork-bomb/>cybercity.biz</a>, traducción al español <a href=https://github.com/efsbl>efsbl</a>, revisó @jedux.</p><div class=ve-desktop><ins class=dcmads style=display:inline-block;width:728px;height:90px data-dcm-placement=N410401.3634809SYSARMY.COMBLOG/B10464038.251052924 data-dcm-rendering-mode=iframe data-dcm-https-only data-dcm-resettable-device-id data-dcm-app-id><script src=https://www.googletagservices.com/dcm/dcmads.js></script></ins></div><div class=ve-mobile><ins class=dcmads style=display:inline-block;width:320px;height:50px data-dcm-placement=N410401.3634809SYSARMY.COMBLOG/B10464038.250920272 data-dcm-rendering-mode=iframe data-dcm-https-only data-dcm-resettable-device-id data-dcm-app-id><script src=https://www.googletagservices.com/dcm/dcmads.js></script></ins></div><script>if(window.innerWidth<960)for(var divsToHide=document.getElementsByClassName("ve-desktop"),i=0;i<divsToHide.length;i++)divsToHide[i].style.visibility="hidden",divsToHide[i].style.display="none";else for(divsToHide=document.getElementsByClassName("ve-mobile"),i=0;i<divsToHide.length;i++)divsToHide[i].style.visibility="hidden",divsToHide[i].style.display="none"</script></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Leer otros posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=https://sysarmy.com/blog/posts/polemicaenvar-s05e02/><span class=button__icon>←</span>
<span class=button__text>Las noticias de Marzo 2021! - Polémica en /var S05E02</span>
</a></span><span class="button next"><a href=https://sysarmy.com/blog/posts/sqlite-no-es-una-base-de-datos-de-juguete/><span class=button__text>SQLite no es una base de datos de juguete</span>
<span class=button__icon>→</span></a></span></div></div></div></div><footer class=footer><div class=footer__inner><a href=/blog class=logo style=text-decoration:none><span class=logo__mark><svg class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg>
</span><span class=logo__text>sysarmy:~ blog$</span>
<span class=logo__cursor></span></a><div class=copyright><span>© 2025 Powered by
<a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span>
<span>Theme created by
<a href=https://twitter.com/panr target=_blank rel=noopener>panr</a></span></div></div></footer><script src=https://sysarmy.com/blog/assets/main.js></script><script src=https://sysarmy.com/blog/assets/prism.js></script></div></body></html>